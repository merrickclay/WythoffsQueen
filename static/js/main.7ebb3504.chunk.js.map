{"version":3,"sources":["components/GameTile.jsx","components/GameBoard.jsx","functions/fetchCredentials.jsx","App.js","reportWebVitals.js","index.js"],"names":["GameTile","props","className","highlighted","onClick","callbackFunc","x","y","occupied","icon","id","AWS","require","GameBoard","useState","position","setPosition","setError","tiles","setTiles","acceptNewMoves","setAcceptNewMoves","enableHighlighs","setEnableHighlights","invokeUrl","submitMove","useCallback","newPosition","a","Promise","resolve","setTimeout","Date","now","time","dateFormat","Axios","post","movePosition","headers","UserId","config","credentials","identityId","then","response","console","log","data","gameStatus","window","location","reload","catch","error","finally","createBoard","tileArray","i","height","j","width","push","map","coords","useEffect","err","startGame","style","gridTemplate","refreshCredentials","refreshPromise","expireTime","library","add","fab","faCrown","faFortAwesome","region","CognitoIdentityCredentials","IdentityPoolId","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7ebb3504.chunk.js","sourcesContent":["import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport './GameTile.css';\r\n\r\nexport default function GameTile(props) {\r\n  function handleClick() {\r\n    if (!props.highlighted) {\r\n      return;\r\n    }\r\n    props.callbackFunc({ x: props.x, y: props.y });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`game-tile ${props.highlighted ? 'highlighted' : ''}`}\r\n      onClick={handleClick}\r\n    >\r\n      {props.occupied && <FontAwesomeIcon icon=\"crown\" id=\"crown-icon\" />}\r\n      {props.x === 0 && props.y === 0 && (\r\n        <FontAwesomeIcon\r\n          icon={['fab', 'fort-awesome']}\r\n          id=\"castle-icon\"\r\n          className={props.occupied ? 'captured' : ''}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from 'react';\r\nimport Axios from 'axios';\r\nimport dateFormat from 'dateformat';\r\nimport GameTile from './GameTile';\r\nimport './GameBoard.css';\r\nimport { useEffect } from 'react';\r\n\r\nconst AWS = require('aws-sdk');\r\n\r\nexport default function GameBoard(props) {\r\n  const [position, setPosition] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [tiles, setTiles] = useState(null);\r\n  const [acceptNewMoves, setAcceptNewMoves] = useState(true);\r\n  const [enableHighlighs, setEnableHighlights] = useState(true);\r\n\r\n  const invokeUrl = 'https://6k6fezitqe.execute-api.us-west-1.amazonaws.com/';\r\n\r\n  function startGame() {\r\n    var time = Date.now();\r\n    time = dateFormat(Date.now(), 'yyyymmdd\"T\"hhMMss\"Z\"');\r\n    Axios.post(\r\n      invokeUrl + 'startGame',\r\n      {},\r\n      {\r\n        headers: {\r\n          UserId: AWS.config.credentials.identityId,\r\n          'X-Amz-Date': time,\r\n        },\r\n      }\r\n    )\r\n      .then((response) => {\r\n        console.log(response);\r\n        setPosition({\r\n          x: response.data.position.x,\r\n          y: response.data.position.y,\r\n        });\r\n        setError(null);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setError(err);\r\n      });\r\n  }\r\n\r\n  const submitMove = useCallback(\r\n    async (newPosition) => {\r\n      if (!acceptNewMoves) {\r\n        return;\r\n      }\r\n      setEnableHighlights(false);\r\n      setAcceptNewMoves(false);\r\n      setPosition(newPosition);\r\n      await new Promise((resolve) => setTimeout(resolve, 300));\r\n      var time = Date.now();\r\n      time = dateFormat(Date.now(), 'yyyymmdd\"T\"hhMMss\"Z\"');\r\n      Axios.post(\r\n        invokeUrl + 'submitMove',\r\n        { movePosition: newPosition },\r\n        {\r\n          headers: {\r\n            UserId: AWS.config.credentials.identityId,\r\n            'X-Amz-Date': time,\r\n          },\r\n        }\r\n      )\r\n        .then(async (response) => {\r\n          console.log(response);\r\n          setAcceptNewMoves(true);\r\n          setError(null);\r\n          setPosition({\r\n            x: response.data.position.x,\r\n            y: response.data.position.y,\r\n          });\r\n          if (response.data.gameStatus !== 'IN_PROGRESS') {\r\n            await new Promise((resolve) => setTimeout(resolve, 500));\r\n            window.location.reload(false);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setError(null);\r\n        })\r\n        .finally(setEnableHighlights(true));\r\n    },\r\n    [acceptNewMoves]\r\n  );\r\n\r\n  const createBoard = useCallback(() => {\r\n    let tileArray = [];\r\n    for (let i = props.height - 1; i >= 0; i--) {\r\n      for (let j = 0; j < props.width; j++) {\r\n        tileArray.push([j, i]);\r\n      }\r\n    }\r\n    setTiles(\r\n      tileArray.map((coords) => (\r\n        <GameTile\r\n          x={coords[0]}\r\n          y={coords[1]}\r\n          key={coords[1] * props.width + coords[0]}\r\n          highlighted={\r\n            enableHighlighs &&\r\n            position &&\r\n            coords[0] <= position.x && // only highlight cells left of queen\r\n            coords[1] <= position.y && // only highlight cells below queen\r\n            (coords[0] === position.x || // highlight cells in same column as queen\r\n              coords[1] === position.y || // highlight cells in same row as queen\r\n              coords[0] - coords[1] === position.x - position.y) && // highlight cells diagonal from queen\r\n            !(coords[0] === position.x && coords[1] === position.y) // don't highlight queen\r\n          }\r\n          occupied={\r\n            position && coords[0] === position.x && coords[1] === position.y\r\n          }\r\n          callbackFunc={submitMove}\r\n        />\r\n      ))\r\n    );\r\n  }, [props.width, props.height, position, submitMove]);\r\n\r\n  useEffect(() => {\r\n    startGame();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    createBoard();\r\n  }, [position, createBoard]);\r\n\r\n  return (\r\n    <div\r\n      id=\"gameboard\"\r\n      style={{\r\n        gridTemplate:\r\n          'repeat(' +\r\n          props.height +\r\n          ', 1fr) / repeat(' +\r\n          props.width +\r\n          ', 1fr)',\r\n      }}\r\n    >\r\n      {tiles}\r\n    </div>\r\n  );\r\n}\r\n","const AWS = require('aws-sdk');\r\n\r\nasync function refreshCredentials() {\r\n  await AWS.config.credentials.refreshPromise();\r\n  console.log(AWS.config.credentials);\r\n  // schedule the next credential refresh when they're about to expire\r\n  setTimeout(\r\n    refreshCredentials,\r\n    AWS.config.credentials.expireTime - new Date()\r\n  );\r\n}\r\n\r\nexport default function fetchCredentials() {\r\n  refreshCredentials();\r\n  console.log(AWS.config.credentials);\r\n}\r\n","import './App.css';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCrown } from '@fortawesome/free-solid-svg-icons';\nimport { fab, faFortAwesome } from '@fortawesome/free-brands-svg-icons';\nimport GameBoard from './components/GameBoard';\nimport useFetchCredentials from './functions/fetchCredentials';\n\nlibrary.add(fab, faCrown, faFortAwesome);\n\nconst AWS = require('aws-sdk');\nAWS.config.region = 'us-west-1';\n\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: 'us-west-1:4f4c2491-7c42-4063-aad0-1ea855da82b9',\n});\n\nfunction App() {\n  useFetchCredentials();\n\n  return (\n    <div className=\"App\">\n      <h1>Wythoff's Queen</h1>\n      <GameBoard width={25} height={25} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}