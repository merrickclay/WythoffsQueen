{"version":3,"sources":["components/GameTile.jsx","components/GameBoard.jsx","functions/fetchCredentials.jsx","App.js","reportWebVitals.js","index.js"],"names":["GameTile","props","className","highlighted","onClick","callbackFunc","x","y","icon","id","occupied","AWS","require","GameBoard","useState","position","setPosition","setError","tiles","setTiles","acceptNewMoves","setAcceptNewMoves","invokeUrl","submitMove","useCallback","newPosition","a","Promise","resolve","setTimeout","Date","now","time","dateFormat","Axios","post","movePosition","headers","UserId","config","credentials","identityId","then","response","console","log","data","catch","error","createBoard","tileArray","i","height","j","width","push","map","coords","useEffect","err","startGame","style","gridTemplate","refreshCredentials","refreshPromise","expireTime","library","add","fab","faCrown","faFortAwesome","region","CognitoIdentityCredentials","IdentityPoolId","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8SAKe,SAASA,EAASC,GAQ/B,OACE,sBACEC,UAAS,oBAAeD,EAAME,YAAc,cAAgB,IAC5DC,QAVJ,WACOH,EAAME,aAGXF,EAAMI,aAAa,CAAEC,EAAGL,EAAMK,EAAGC,EAAGN,EAAMM,KAI1C,UAIe,IAAZN,EAAMK,GAAuB,IAAZL,EAAMM,GACtB,cAAC,IAAD,CAAiBC,KAAM,CAAC,MAAO,gBAAiBC,GAAG,gBAEpDR,EAAMS,UAAY,cAAC,IAAD,CAAiBF,KAAK,QAAQC,GAAG,kB,UCdpDE,EAAMC,EAAQ,IAEL,SAASC,EAAUZ,GAChC,MAAgCa,mBAAS,MAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAA0BF,mBAAS,MAAnC,mBAAcG,GAAd,WACA,EAA0BH,mBAAS,MAAnC,mBAAOI,EAAP,KAAcC,EAAd,KACA,EAA4CL,oBAAS,GAArD,mBAAOM,EAAP,KAAuBC,EAAvB,KAEMC,EAAY,0DA6BlB,IAAMC,EAAaC,sBAAW,uCAC5B,WAAOC,GAAP,eAAAC,EAAA,yDACON,EADP,wDAIEC,GAAkB,GAClBL,EAAYS,GALd,SAMQ,IAAIE,SAAQ,SAACC,GAAD,OAAaC,WAAWD,EAAS,QANrD,OAOaE,KAAKC,MAChBC,EAAOC,YAAWH,KAAKC,MAAO,wBAC9BG,IAAMC,KACJb,EAAY,aACZ,CAAEc,aAAcX,GAChB,CACEY,QAAS,CACPC,OAAQ3B,EAAI4B,OAAOC,YAAYC,WAC/B,aAAcT,KAIjBU,KAVH,uCAUQ,WAAOC,GAAP,SAAAjB,EAAA,sDACJkB,QAAQC,IAAIF,GACZtB,GAAkB,GAClBJ,EAAS,MACTD,EAAY,CACVV,EAAGqC,EAASG,KAAK/B,SAAST,EAC1BC,EAAGoC,EAASG,KAAK/B,SAASR,IANxB,2CAVR,uDAmBGwC,OAAM,SAACC,GACNJ,QAAQC,IAAIG,GACZ/B,EAAS,SA9Bf,2CAD4B,sDAkC5B,CAACG,IAGG6B,EAAczB,uBAAY,WAE9B,IADA,IAAI0B,EAAY,GACPC,EAAIlD,EAAMmD,OAAS,EAAGD,GAAK,EAAGA,IACrC,IAAK,IAAIE,EAAI,EAAGA,EAAIpD,EAAMqD,MAAOD,IAC/BH,EAAUK,KAAK,CAACF,EAAGF,IAGvBhC,EACE+B,EAAUM,KAAI,SAACC,GAAD,OACZ,cAAC,EAAD,CACEnD,EAAGmD,EAAO,GACVlD,EAAGkD,EAAO,GAEVtD,YACEY,GACA0C,EAAO,IAAM1C,EAAST,GACtBmD,EAAO,IAAM1C,EAASR,IACrBkD,EAAO,KAAO1C,EAAST,GACtBmD,EAAO,KAAO1C,EAASR,GACvBkD,EAAO,GAAKA,EAAO,KAAO1C,EAAST,EAAIS,EAASR,MAChDkD,EAAO,KAAO1C,EAAST,GAAKmD,EAAO,KAAO1C,EAASR,GAEvDG,SACEK,GAAY0C,EAAO,KAAO1C,EAAST,GAAKmD,EAAO,KAAO1C,EAASR,EAEjEF,aAAckB,GAbTkC,EAAO,GAAKxD,EAAMqD,MAAQG,EAAO,UAiB3C,CAACxD,EAAMqD,MAAOrD,EAAMmD,OAAQrC,EAAUQ,IAUzC,OARAmC,qBAAU,YA/FV,WACE,IAAI1B,EAAOF,KAAKC,MAChBC,EAAOC,YAAWH,KAAKC,MAAO,wBAC9BG,IAAMC,KACJb,EAAY,YACZ,GACA,CACEe,QAAS,CACPC,OAAQ3B,EAAI4B,OAAOC,YAAYC,WAC/B,aAAcT,KAIjBU,MAAK,SAACC,GACLC,QAAQC,IAAIF,GACZ3B,EAAY,CACVV,EAAGqC,EAASG,KAAK/B,SAAST,EAC1BC,EAAGoC,EAASG,KAAK/B,SAASR,IAE5BU,EAAS,SAEV8B,OAAM,SAACY,GACNf,QAAQC,IAAIc,GACZ1C,EAAS0C,MAyEbC,KACC,IAEHF,qBAAU,WACRT,MACC,CAAClC,EAAUkC,IAGZ,qBACExC,GAAG,YACHoD,MAAO,CACLC,aACE,UACA7D,EAAMmD,OACN,mBACAnD,EAAMqD,MACN,UARN,SAWGpC,ICpIP,IAAMP,EAAMC,EAAQ,I,SAELmD,I,2EAAf,sBAAArC,EAAA,sEACQf,EAAI4B,OAAOC,YAAYwB,iBAD/B,OAEEpB,QAAQC,IAAIlC,EAAI4B,OAAOC,aAEvBX,WACEkC,EACApD,EAAI4B,OAAOC,YAAYyB,WAAa,IAAInC,MAN5C,4C,sBCKAoC,IAAQC,IAAIC,IAAKC,IAASC,KAE1B,IAAM3D,EAAMC,EAAQ,IACpBD,EAAI4B,OAAOgC,OAAS,YAEpB5D,EAAI4B,OAAOC,YAAc,IAAI7B,EAAI6D,2BAA2B,CAC1DC,eAAgB,mDAaHC,MAVf,WAGE,ODNAX,IACAnB,QAAQC,IAAIlC,EAAI4B,OAAOC,aCMrB,qBAAKtC,UAAU,MAAf,SACE,cAAC,EAAD,CAAWoD,MAAO,GAAIF,OAAQ,QCTrBuB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBnC,MAAK,YAAkD,IAA/CoC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,K","file":"static/js/main.faf7ea3c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport './GameTile.css';\r\n\r\nexport default function GameTile(props) {\r\n  function handleClick() {\r\n    if (!props.highlighted) {\r\n      return;\r\n    }\r\n    props.callbackFunc({ x: props.x, y: props.y });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`game-tile ${props.highlighted ? 'highlighted' : ''}`}\r\n      onClick={handleClick}\r\n    >\r\n      {props.x === 0 && props.y === 0 && (\r\n        <FontAwesomeIcon icon={['fab', 'fort-awesome']} id=\"castle-icon\" />\r\n      )}\r\n      {props.occupied && <FontAwesomeIcon icon=\"crown\" id=\"crown-icon\" />}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useCallback } from 'react';\r\nimport Axios from 'axios';\r\nimport dateFormat from 'dateformat';\r\nimport GameTile from './GameTile';\r\nimport './GameBoard.css';\r\nimport { useEffect } from 'react';\r\n\r\nconst AWS = require('aws-sdk');\r\n\r\nexport default function GameBoard(props) {\r\n  const [position, setPosition] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [tiles, setTiles] = useState(null);\r\n  const [acceptNewMoves, setAcceptNewMoves] = useState(true);\r\n\r\n  const invokeUrl = 'https://6k6fezitqe.execute-api.us-west-1.amazonaws.com/';\r\n\r\n  function startGame() {\r\n    var time = Date.now();\r\n    time = dateFormat(Date.now(), 'yyyymmdd\"T\"hhMMss\"Z\"');\r\n    Axios.post(\r\n      invokeUrl + 'startGame',\r\n      {},\r\n      {\r\n        headers: {\r\n          UserId: AWS.config.credentials.identityId,\r\n          'X-Amz-Date': time,\r\n        },\r\n      }\r\n    )\r\n      .then((response) => {\r\n        console.log(response);\r\n        setPosition({\r\n          x: response.data.position.x,\r\n          y: response.data.position.y,\r\n        });\r\n        setError(null);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setError(err);\r\n      });\r\n  }\r\n\r\n  const submitMove = useCallback(\r\n    async (newPosition) => {\r\n      if (!acceptNewMoves) {\r\n        return;\r\n      }\r\n      setAcceptNewMoves(false);\r\n      setPosition(newPosition);\r\n      await new Promise((resolve) => setTimeout(resolve, 500));\r\n      var time = Date.now();\r\n      time = dateFormat(Date.now(), 'yyyymmdd\"T\"hhMMss\"Z\"');\r\n      Axios.post(\r\n        invokeUrl + 'submitMove',\r\n        { movePosition: newPosition },\r\n        {\r\n          headers: {\r\n            UserId: AWS.config.credentials.identityId,\r\n            'X-Amz-Date': time,\r\n          },\r\n        }\r\n      )\r\n        .then(async (response) => {\r\n          console.log(response);\r\n          setAcceptNewMoves(true);\r\n          setError(null);\r\n          setPosition({\r\n            x: response.data.position.x,\r\n            y: response.data.position.y,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setError(null);\r\n        });\r\n    },\r\n    [acceptNewMoves]\r\n  );\r\n\r\n  const createBoard = useCallback(() => {\r\n    let tileArray = [];\r\n    for (let i = props.height - 1; i >= 0; i--) {\r\n      for (let j = 0; j < props.width; j++) {\r\n        tileArray.push([j, i]);\r\n      }\r\n    }\r\n    setTiles(\r\n      tileArray.map((coords) => (\r\n        <GameTile\r\n          x={coords[0]}\r\n          y={coords[1]}\r\n          key={coords[1] * props.width + coords[0]}\r\n          highlighted={\r\n            position &&\r\n            coords[0] <= position.x && // only highlight cells left of queen\r\n            coords[1] <= position.y && // only highlight cells below queen\r\n            (coords[0] === position.x || // highlight cells in same column as queen\r\n              coords[1] === position.y || // highlight cells in same row as queen\r\n              coords[0] - coords[1] === position.x - position.y) && // highlight cells diagonal from queen\r\n            !(coords[0] === position.x && coords[1] === position.y) // don't highlight queen\r\n          }\r\n          occupied={\r\n            position && coords[0] === position.x && coords[1] === position.y\r\n          }\r\n          callbackFunc={submitMove}\r\n        />\r\n      ))\r\n    );\r\n  }, [props.width, props.height, position, submitMove]);\r\n\r\n  useEffect(() => {\r\n    startGame();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    createBoard();\r\n  }, [position, createBoard]);\r\n\r\n  return (\r\n    <div\r\n      id=\"gameboard\"\r\n      style={{\r\n        gridTemplate:\r\n          'repeat(' +\r\n          props.height +\r\n          ', 1fr) / repeat(' +\r\n          props.width +\r\n          ', 1fr)',\r\n      }}\r\n    >\r\n      {tiles}\r\n    </div>\r\n  );\r\n}\r\n","const AWS = require('aws-sdk');\r\n\r\nasync function refreshCredentials() {\r\n  await AWS.config.credentials.refreshPromise();\r\n  console.log(AWS.config.credentials);\r\n  // schedule the next credential refresh when they're about to expire\r\n  setTimeout(\r\n    refreshCredentials,\r\n    AWS.config.credentials.expireTime - new Date()\r\n  );\r\n}\r\n\r\nexport default function fetchCredentials() {\r\n  refreshCredentials();\r\n  console.log(AWS.config.credentials);\r\n}\r\n","import './App.css';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCrown } from '@fortawesome/free-solid-svg-icons';\nimport { fab, faFortAwesome } from '@fortawesome/free-brands-svg-icons';\nimport GameBoard from './components/GameBoard';\nimport useFetchCredentials from './functions/fetchCredentials';\n\nlibrary.add(fab, faCrown, faFortAwesome);\n\nconst AWS = require('aws-sdk');\nAWS.config.region = 'us-west-1';\n\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\n  IdentityPoolId: 'us-west-1:4f4c2491-7c42-4063-aad0-1ea855da82b9',\n});\n\nfunction App() {\n  useFetchCredentials();\n\n  return (\n    <div className=\"App\">\n      <GameBoard width={25} height={25} />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}